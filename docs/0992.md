# XPath 语法

> 原文：<https://www.javatpoint.com/xpath-syntax>

XPath 表达式使用像网址这样的路径符号来寻址 XML 文档的各个部分。表达式的计算结果是节点集、布尔值、数字或字符串类型的对象。例如，表达式书/作者将返回包含在<book>元素中的<author>元素的节点集，如果这些元素在源 XML 文档中声明的话。</author></book>

在 XPath 中，路径表达式用于选择 XML 文档中的节点或节点集。通过遵循路径或步骤来选择节点。

让我们举个例子来看看 XPath 的语法。这里，我们取一个 XML 文档。

```xml

<?xml version="1.0" encoding="UTF-8"?>
<bookstore>
<book>
  <title lang="en">Three Mistakes of My Life</title>
  <price>110</price>
</book>
<book>
  <title lang="en">Immortals of Meluha</title>
  <price>200</price>
</book>
</bookstore>

```

* * *

## 选择节点

用于选择节点的路径表达式有:

| 索引 | 表示 | 描述 |
| 1) | 节点名 | 选择所有名为“节点名”的节点 |
| 2) | / | 从根节点选择。 |
| 3) | // | 从当前节点中选择文档中与所选内容匹配的节点，无论它们位于何处。 |
| 4) | 。 | 选择当前节点 |
| 5) | .. | 选择当前节点的父节点 |
| 6) | @ | 选择属性 |

**见上例路径表达式及其细节:**

| 路径表达式 | 结果 |
| 书店 | 选择所有名为“书店”的节点 |
| /书店 | 选择根元素书店。**注意:**如果路径以斜杠(/)开头，那么它始终代表一个元素的绝对路径！ |
| 书店/书 | 选择作为书店子级的所有书籍元素。 |
| //书 | 选择所有书籍元素，无论它们在文档中的什么位置。 |
| 书店//书 | 选择书店元素的后代的所有书籍元素，无论它们在书店元素下的什么位置。 |
| //@lang | 选择所有命名为 lang 的属性。 |

* * *

## 述语

谓词用于查找特定节点或包含特定值的节点。

谓词总是嵌入在方括号中。

在下表中，我们列出了一些带有谓词的路径表达式以及表达式的结果:

| 路径表达式 | 结果 |
| /书店/书[1] | 选择作为书店元素的子元素的第一个图书元素。**注意:**在 IE 5，6，7，8，9 中第一个节点是[0]，但按照 W3C 的说法是[1]。要解决 IE 中的这个问题，在 JavaScript: xml.setProperty 中把 selectionlanguage 设置为 XPath:(“selection language”、“XPath”)； |
| /书店/书[last()] | 选择作为书店元素的子元素的最后一个图书元素。 |
| /书店/书[last()-1] | 选择作为书店元素的子元素的最后一个图书元素。 |
| /书店/书[位置()< 3] | 选择作为书店元素的子元素的前两个图书元素。 |
| 标题[@lang] | 选择所有具有名为 lang 的属性的标题元素。 |
| title[@lang='en'] | 选择所有具有值为“en”的“lang”属性的标题元素。 |
| /书店/书[价格> 100] | 选择书店元素中价格元素值大于 100 的所有书籍元素 |
| /书店/书[价格> 100]/书名 | 选择书店元素的图书元素中价格元素的值大于 100 的所有标题元素 |

* * *

## 选择未知节点

XPath 通配符用于选择未知的 XML 节点。

| 通配符 | 描述 |
| * | 匹配任何元素节点 |
| @* | 匹配任何属性节点 |
| 节点() | 匹配任何类型的任何节点 |

**见上例:**

| 路径表达式 | 结果 |
| /书店/* | 选择书店元素的所有子元素节点 |
| //* | 选择文档中的所有元素 |
| //标题[@*] | 选择至少有一种属性的所有标题元素 |

* * *

## 选择多条路径

XPath 表达式中使用了|运算符来选择多个路径。从上面的例子中，我们列出了一些路径表达式和表达式的结果。

| 路径表达式 | 结果 |
| //书籍/标题&#124;//书籍/价格 | 选择所有图书元素的所有标题和价格元素 |
| //标题&#124;//价格 | 选择文档中的所有标题和价格元素 |
| /书店/书/书名&#124;//价格 | 选择书店元素的图书元素的所有标题元素和文档中的所有价格元素 |